import React,{useState,useRef,useEffect}from"react";import PropTypes from"prop-types";const DatePicker=({onChange:n=()=>{},value:e,style:t,lang:r="default",format:a="DMY",start:o="monday",id:l="date-picker",className:s="date-picker"})=>{DatePicker.propTypes={onChange:PropTypes.func,value:PropTypes.string,style:PropTypes.object,lang:PropTypes.string,format:PropTypes.string,start:PropTypes.string,id:PropTypes.string,className:PropTypes.string};const[c,u]=useState(!1),[i,p]=useState((new Date).getFullYear()),[d,m]=useState((new Date).getMonth()),[g,y]=useState(0),[h,f]=useState(0),x=useRef(null),v=useRef(null),b=useRef(null);const k=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(o.toLowerCase())||0,R=(document.addEventListener("mousedown",e=>{c&&x.current&&!x.current.contains(e.target)&&u(!1)}),e=>e%4==0&&e%100!=0||e%400==0);useEffect(()=>{var e;x.current&&((e=x.current.getBoundingClientRect()).bottom>window.innerHeight?f(0-e.height-b.current.offsetHeight-4):f(4))},[c]);const w=e=>{e.preventDefault(),setTimeout(()=>{0===d?(m(11),p(i-1)):m(d-1),D()},10)},C=e=>{e.preventDefault(),setTimeout(()=>{11===d?(m(0),p(i+1)):m(d+1),D()},10)};const E=e=>{e=e.toString().padStart(2,"0");var t=(d+1).toString().padStart(2,"0"),e="MDY"===a?t+`/${e}/`+i:"YMD"===a?i+`/${t}/`+e:e+`/${t}/`+i;b.current.value=e,n(e),u(!1)},D=()=>{let t=31,n=31;[4,6,9,11].includes(d+1)&&(t=30),[5,7,10,12].includes(d+1)&&(n=30),d+1===2&&(t=R(i)?29:28),d+1===3&&(n=R(i)?29:28);var r=new Date(i,d,7-k+1).getDay(),a=[];for(let e=1;e<=r;e++){var o=n-r+e;a.push(React.createElement("button",{key:"previousMonth-"+e,className:"day-button previousMonth",style:{width:"30px",border:"none",background:"none",color:"#CCC"},onClick:w},o))}for(let e=1;e<=t;e++)a.push(React.createElement("button",{key:"currentMonth-"+e,className:"day-button currentMonth",style:{width:"30px",border:"none",background:"none"},onMouseDown:()=>E(e),onMouseOver:e=>e.target.style.background="#EEE",onMouseOut:e=>e.target.style.background="none"},e));for(let e=1;e<=42-t-r;e++)a.push(React.createElement("button",{key:"nextMonth"+e,className:"day-button nextMonth",style:{width:"30px",border:"none",background:"none",color:"#CCC"},onMouseDown:C},e));return React.createElement("div",{className:"month-days",style:{display:"grid",gridTemplateColumns:"repeat(7, 40px)",gridTemplateRows:"repeat(6, 24px)",margin:"0 3px"}},a)};return React.createElement(React.Fragment,null,React.createElement("input",{id:l,className:s,style:t,type:"text",value:e,ref:b,onFocus:()=>{var e=b.current.getBoundingClientRect();y(e.left),u(!0)},onChange:e=>n(e.target.value)}),React.createElement("dialog",{id:"popup",className:"date-picker-popup",ref:x,style:{height:"190px",padding:"10px",paddingRight:"0",marginLeft:g+"px",marginTop:h+"px",backgroundColor:"#FFF",border:"1px solid #CCC",borderBottomColor:"#BBB",boxShadow:"0 5px 15px -5px rgba(0, 0, 0, 0.5)",display:c?"block":"none"}},React.createElement("div",{className:"month-selector",style:{display:"inline-block",textAlign:"center",marginLeft:"4px"}},React.createElement("button",{onClick:w},"<"),React.createElement("span",{style:{display:"inline-block",width:"6rem",textTransform:"capitalize",textAlign:"center"}},new Date(i,d).toLocaleString(r||void 0,{month:"long"})),React.createElement("button",{onClick:C},">")),React.createElement("input",{type:"number",ref:v,min:"1900",max:(new Date).getFullYear(),value:i,onChange:e=>{e=parseInt(e.target.value);p(e),D()},onBlur:()=>{v.current.value<v.current.min&&(v.current.value=v.current.min),v.current.value>v.current.max&&(v.current.value=v.current.max)},onWheel:()=>v.current.focus(),style:{width:"51px",marginRight:"16px",float:"right"}}),(()=>{var t=[];for(let e=k;e<7+k;e++){var n=new Date(0,0,e%7).toLocaleDateString(r||void 0,{weekday:"short"}).slice(0,-1);t.push(React.createElement("span",{key:e,style:{display:"inline-block",width:"35px",textTransform:"capitalize",textAlign:"center"}},n))}return React.createElement("div",{className:"week-days",style:{display:"grid",gridTemplateColumns:"repeat(7, 40px)"}},t)})(),D()))};export{DatePicker};